(function(e){function n(n){for(var c,r,u=n[0],a=n[1],s=n[2],l=0,d=[];l<u.length;l++)r=u[l],o[r]&&d.push(o[r][0]),o[r]=0;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c]);f&&f(n);while(d.length)d.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],c=!0,r=1;r<t.length;r++){var u=t[r];0!==o[u]&&(c=!1)}c&&(i.splice(n--,1),e=a(a.s=t[0]))}return e}var c={},r={app:0},o={app:0},i=[];function u(e){return a.p+"js/"+({}[e]||e)+"."+{"chunk-00b624bc":"2ca78d1c","chunk-22a862a0":"d1f9c8f7","chunk-251075f9":"84d16471","chunk-15c8746d":"8f041cba","chunk-1e3b68be":"04f1cf79","chunk-24768a82":"ba3b9175","chunk-68d74ef4":"c392b17d","chunk-6e67c386":"898fa176","chunk-5a25adc0":"e94b076b","chunk-64fa48ea":"b6ad2312","chunk-783b7702":"228afab3","chunk-9ec189b8":"c1186a0b"}[e]+".js"}function a(n){if(c[n])return c[n].exports;var t=c[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(e){var n=[],t={"chunk-00b624bc":1,"chunk-22a862a0":1,"chunk-251075f9":1,"chunk-15c8746d":1,"chunk-1e3b68be":1,"chunk-24768a82":1,"chunk-68d74ef4":1,"chunk-6e67c386":1,"chunk-5a25adc0":1,"chunk-64fa48ea":1,"chunk-783b7702":1,"chunk-9ec189b8":1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=new Promise(function(n,t){for(var c="css/"+({}[e]||e)+"."+{"chunk-00b624bc":"dea48353","chunk-22a862a0":"787655eb","chunk-251075f9":"0577bfaa","chunk-15c8746d":"a5bb090a","chunk-1e3b68be":"94c84c4e","chunk-24768a82":"965c6a54","chunk-68d74ef4":"c289a7dc","chunk-6e67c386":"3c7847e8","chunk-5a25adc0":"aea9b8d0","chunk-64fa48ea":"b59e3781","chunk-783b7702":"f7ea393f","chunk-9ec189b8":"53a4c3c9"}[e]+".css",o=a.p+c,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var s=i[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===c||l===o))return n()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],l=s.getAttribute("data-href");if(l===c||l===o)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var c=n&&n.target&&n.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=c,delete r[e],f.parentNode.removeChild(f),t(i)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)}).then(function(){r[e]=0}));var c=o[e];if(0!==c)if(c)n.push(c[2]);else{var i=new Promise(function(n,t){c=o[e]=[n,t]});n.push(c[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=u(e),s=function(n){l.onerror=l.onload=null,clearTimeout(d);var t=o[e];if(0!==t){if(t){var c=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src,i=new Error("Loading chunk "+e+" failed.\n("+c+": "+r+")");i.type=c,i.request=r,t[1](i)}o[e]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(n)},a.m=e,a.c=c,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var c in e)a.d(t,c,function(n){return e[n]}.bind(null,c));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="/",a.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var f=l;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"0c56":function(e,n,t){"use strict";var c=t("564d"),r=t.n(c);r.a},"21bb":function(e,n,t){"use strict";var c=t("bcc9"),r=t.n(c);r.a},4360:function(e,n,t){"use strict";var c=t("2b0e"),r=t("2f62"),o=(t("386d"),t("456d"),t("ac6a"),t("ba4e")),i=t("5c0f");function u(e,n,t){var c="vuexoidc:"+e;if("function"===typeof window.CustomEvent)return t=Object(i["b"])([t,{detail:n}]),new window.CustomEvent(c,t);t=t||{bubbles:!1,cancelable:!1},t=Object(i["b"])([t,{detail:n}]);var r=document.createEvent("CustomEvent");return r.initCustomEvent(c,t.bubbles,t.cancelable,t.detail),r}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(window){var c=u(e,Object(i["b"])([{},n]),t);window.dispatchEvent(c)}}var s=Object(o["b"])(oidcConfig);if(oidcConfig.dispatchEventsOnWindow){var l=["userLoaded","userUnloaded","accessTokenExpiring","accessTokenExpired","silentRenewError","userSignedOut"];l.forEach(function(e){Object(o["a"])(s,e,function(n){var t=n&&n.detail?n.detail:{};a(e,t)})})}var d={userLoaded:function(e){},userSignedOut:function(){console.log("UserSignedOut：",arguments)},accessTokenExpiring:function(){console.log("AccessToken Expiring：",arguments)},accessTokenExpired:function(){console.log("AccessToken Expired：",arguments),s.signoutRedirect().then(function(){console.log("signout redirect")}).catch(function(e){console.log(e)})},silentRenewError:function(){console.error("Silent Renew Error：",arguments)}};Object.keys(d).forEach(function(e){Object(o["a"])(s,e,d[e])});var f=Object(o["c"])(oidcConfig),h=function(e){return!!e.meta.isOidcCallback||!(!e.path||e.path!=f)},p=function(e){return!!e.access_token},m=function(e){return!!e.meta.isPublic},b={state:{access_token:null,user:null,scopes:null,events_are_bound:!1},getters:{oidcIsAuthenticated:function(e){return p(e)},oidcUser:function(e){return e.user},oidcAccessToken:function(e){return Object(o["f"])(e.access_token)?null:e.access_token},oidcAccessTokenExp:function(e){return Object(o["e"])(e.access_token)},oidcError:function(e){return e.error},oidcIsRoutePublic:function(e){return function(e){return m(e)}}},mutations:{setOidcAuth:function(e,n){e.access_token=n.access_token,e.user=n.profile,e.scopes=n.scopes,e.error=null},setOidcUser:function(e,n){e.user=n.profile},unsetOidcAuth:function(e){e.access_token=null,e.user=null},setOidcError:function(e,n){e.error=n&&n.message?n.message:n},setOidcEventsAreBound:function(e){e.events_are_bound=!0}},actions:{oidcCheckAccess:function(e,n){return new Promise(function(t){if(h(n))t(!0);else{var c=!0,r=new Promise(function(e){s.getUser().then(function(n){e(n)}).catch(function(){e(null)})}),o=p(e.state);r.then(function(r){!r||r.expired?(o&&e.commit("unsetOidcAuth"),m(n)?oidcConfig.silent_redirect_uri&&(console.log("用户过期1"),e.dispatch("authenticateOidcSilent")):(e.dispatch("authenticateOidc",n.path),c=!1)):e.dispatch("oidcWasAuthenticated",r),t(c)})}})},authenticateOidc:function(e,n){n+=(document.location.search||"")+(document.location.hash||""),sessionStorage.setItem("vuex_oidc_active_route",n),s.signinRedirect().catch(function(n){e.commit("setOidcError",n)})},authenticateOidcSilent:function(e){s.signinSilent().then(function(n){e.dispatch("oidcWasAuthenticated",n)}).catch(function(n){e.commit("setOidcError",n)})},oidcWasAuthenticated:function(e,n){e.commit("setOidcAuth",n),e.state.events_are_bound||(s.events.addAccessTokenExpired(function(){e.commit("unsetOidcAuth")}),oidcConfig.automaticSilentRenew&&s.events.addAccessTokenExpiring(function(){console.log("用户过期2"),e.dispatch("authenticateOidcSilent")}),e.commit("setOidcEventsAreBound"))},oidcSignInCallback:function(e){return new Promise(function(n,t){s.signinRedirectCallback().then(function(t){e.dispatch("oidcWasAuthenticated",t),sessionStorage.setItem("oidc_user",JSON.stringify(t)),n(sessionStorage.getItem("vuex_oidc_active_route")||"/")}).catch(function(n){e.commit("setOidcError",n),t(n)})})},getOidcUser:function(e){s.getUser().then(function(n){e.commit("setOidcUser",n)})},signOutOidc:function(e){s.signoutRedirect().then(function(){e.commit("unsetOidcAuth")})}}},v=b,g={},k=g;c["default"].use(r["a"]);n["a"]=new r["a"].Store({strict:!1,modules:{omgr:v},getters:k})},"564d":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("9e1f"),t("450d");var c=t("6ed5"),r=t.n(c),o=(t("0fb7"),t("f529")),i=t.n(o),u=(t("cadf"),t("551c"),t("f751"),t("097d"),t("2b0e")),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[],l=(t("5c0b"),t("2877")),d={},f=Object(l["a"])(d,a,s,!1,null,null,null),h=f.exports,p=t("8c4f"),m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home"},[t("el-container",[t("el-aside",{attrs:{width:"200px"}},[t("SideMenu")],1),t("el-container",[t("el-main",[t("router-view")],1)],1)],1)],1)},b=[],v=(t("de31"),t("c69e")),g=t.n(v),k=(t("a769"),t("5cc3")),O=t.n(k),w=(t("a673"),t("7b31")),E=t.n(w),A=(t("adec"),t("3d2d")),S=t.n(A),x=(t("f4f9"),t("c2cc")),y=t.n(x),j=(t("7a0f"),t("0f6c")),C=t.n(j),P=function(){var e=this,n=e.$createElement,c=e._self._c||n;return c("div",{staticClass:"side"},[c("el-row",{staticClass:"tac"},[c("img",{staticClass:"logo",attrs:{src:t("db1a"),alt:""}}),c("el-col",{attrs:{span:24}},[c("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,router:""},on:{open:e.handleOpen,close:e.handleClose}},[e.isSuper()||e.isDev()?c("el-menu-item",{attrs:{index:"/app"}},[c("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的应用")])]):e._e(),e.isSuper()?c("el-menu-item",{attrs:{index:"/resource"}},[c("span",{attrs:{slot:"title"},slot:"title"},[e._v("api资源管理")])]):e._e(),e.isSuper()?c("el-menu-item",{attrs:{index:"/client"}},[c("span",{attrs:{slot:"title"},slot:"title"},[e._v("客户端管理")])]):e._e(),e.isPersonnel()?c("el-menu-item",{attrs:{index:"/account"}},[c("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户管理")])]):e._e(),c("el-menu-item",{attrs:{index:"/mpassword"}},[c("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改密码")])])],1)],1)],1)],1)},U=[],T=(t("6762"),t("2fdb"),t("cebc")),$=(t("34db"),t("3803")),q=t.n($),R=(t("8bd8"),t("4cb2")),I=t.n(R),L=(t("ce18"),t("f58e")),N=t.n(L),M=(t("4ca3"),t("443e")),W=t.n(M),B=t("2f62");u["default"].use(C.a),u["default"].use(y.a),u["default"].use(W.a),u["default"].use(N.a),u["default"].use(I.a),u["default"].use(q.a);var D={name:"side",components:{},computed:Object(T["a"])({},Object(B["c"])(["oidcUser"])),methods:{isPersonnel:function(){return!(!this.oidcUser||"人力资源"!==this.oidcUser.role&&!this.oidcUser.role.includes("人力资源")&&!this.oidcUser.role.includes("管理员"))},isDev:function(){return!(!this.oidcUser||"研发工程师"!==this.oidcUser.role&&!this.oidcUser.role.includes("研发工程师")&&!this.oidcUser.role.includes("管理员"))},isSuper:function(){return!(!this.oidcUser||"管理员"!==this.oidcUser.role&&!this.oidcUser.role.includes("管理员"))},handleOpen:function(e,n){console.log(e,n)},handleClose:function(e,n){console.log(e,n)}}},J=D,z=(t("0c56"),Object(l["a"])(J,P,U,!1,null,null,null)),F=z.exports;u["default"].use(C.a),u["default"].use(y.a),u["default"].use(S.a),u["default"].use(E.a),u["default"].use(O.a),u["default"].use(g.a);var Q={name:"home",components:{SideMenu:F}},Z=Q,H=(t("21bb"),Object(l["a"])(Z,m,b,!1,null,null,null)),K=H.exports,G=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e._v("\n    重定向中...\n")])},V=[],X=t("4360"),Y={name:"OidcCallback",methods:Object(T["a"])({},Object(B["b"])(["oidcSignInCallback"])),created:function(){var e=this;this.oidcSignInCallback().then(function(n){var t=X["a"].getters.oidcUser.role;"人力资源"===t||_.includes(t,"人力资源")?e.$router.push("/account"):"游客"===t||_.includes(t,"游客")?e.$router.push("/mpassword"):e.$router.push(n)}).catch(function(n){console.error(n),e.$router.push("/callback-error")})}},ee=Y,ne=Object(l["a"])(ee,G,V,!1,null,null,null),te=ne.exports,ce=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e._v("\n    静默重新授权中...\n")])},re=[],oe=t("ba4e"),ie={name:"SilentRenew",methods:{},created:function(){Object(oe["d"])()}},ue=ie,ae=Object(l["a"])(ue,ce,re,!1,null,null,null),se=ae.exports,le=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},de=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h1",[e._v("认证发生错误，请重试")])])}],fe={name:"OidcCallbackError",mounted:function(){this.$router.push("/")}},he=fe,pe=Object(l["a"])(he,le,de,!1,null,null,null),me=pe.exports,be=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("p",[e._v("正在退出妙笔应用管理系统")])},ve=[],ge={name:"Logout",mounted:function(){X["a"].dispatch("signOutOidc")}},ke=ge,Oe=Object(l["a"])(ke,be,ve,!1,null,null,null),_e=Oe.exports;u["default"].component(i.a),u["default"].use(p["a"]);var we=new p["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:K,redirect:"/app",meta:{requiresAuth:!0,role:["管理员","研发工程师"]},children:[{path:"/app",name:"app",component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-783b7702")]).then(t.bind(null,"f82c"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/app/client/:id",name:"appclient",props:!0,component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-15c8746d")]).then(t.bind(null,"f23b"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/app/role/:id",name:"role",props:!0,component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-6e67c386"),t.e("chunk-64fa48ea")]).then(t.bind(null,"b8ed"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/app/rule/:id",name:"rule",props:!0,component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-1e3b68be")]).then(t.bind(null,"c99b"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/resource",name:"resource",component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-9ec189b8")]).then(t.bind(null,"2240"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/resedit/:id?",name:"resedit",props:!0,component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-68d74ef4")]).then(t.bind(null,"ca10"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/client",name:"client",component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-24768a82")]).then(t.bind(null,"2400"))},meta:{requiresAuth:!0,role:["管理员","研发工程师"]}},{path:"/account",name:"account",component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-251075f9"),t.e("chunk-6e67c386"),t.e("chunk-5a25adc0")]).then(t.bind(null,"3e1f"))},meta:{requiresAuth:!0,role:["管理员","人力资源"]}},{path:"/mpassword",name:"modifypassword",component:function(){return Promise.all([t.e("chunk-00b624bc"),t.e("chunk-22a862a0")]).then(t.bind(null,"ae42"))},meta:{requiresAuth:!0,role:["管理员","人力资源","研发工程师","游客"]}}]},{path:"/callback",name:"oidcCallback",component:te,meta:{isPublic:!0,role:["管理员","人力资源","研发工程师","游客"]}},{path:"/callback-error",name:"oidcCallbackError",component:me,meta:{isPublic:!0,role:["管理员","人力资源","研发工程师","游客"]}},{path:"/silent-renew",name:"silentRenew",component:se,meta:{isPublic:!0,role:["管理员","人力资源","研发工程师","游客"]}},{path:"/logout",name:"logout",component:_e,meta:{isPublic:!0,role:["管理员","人力资源","研发工程师","游客"]}}]}),Ee=t("31bd");we.beforeEach(function(e,n,t){X["a"].dispatch("oidcCheckAccess",e).then(function(n){if(n){var c=e.matched.some(function(e){return e.meta.requiresAuth});if(c)X["a"].getters.oidcUser.role;t()}else i.a.error("未授权访问此页面")})}),u["default"].component(i.a),u["default"].component(r.a),u["default"].prototype.$message=i.a,u["default"].prototype.$confirm=r.a.confirm,u["default"].prototype.$alert=r.a.alert,u["default"].config.productionTip=!1;Object(Ee["sync"])(X["a"],we);new u["default"]({router:we,store:X["a"],render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";var c=t("5e27"),r=t.n(c);r.a},"5c0f":function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"c",function(){return i}),t.d(n,"a",function(){return u}),t.d(n,"f",function(){return a}),t.d(n,"g",function(){return s}),t.d(n,"h",function(){return l}),t.d(n,"e",function(){return d}),t.d(n,"d",function(){return f});t("a481"),t("28a5"),t("456d"),t("ac6a");var c=t("f90c"),r=t.n(c),o=function(e){return e.reduce(function(e,n){return Object.keys(n||{}).forEach(function(t){e[t]=n[t]}),e},{})},i=function(e){try{var n=e.split(".")[1],t=n.replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}catch(c){return{}}},u=function(e){return e&&e.length>0?e.charAt(0).toUpperCase()+e.slice(1):""},a=function(e,n,t){null==n||n.length<6||!/^[a-zA-Z_]{2}[a-zA-Z0-9_]+$/.test(n.trim())?t(new Error("请输入字母开头字母数字下划线组成的名称，最少6个字符")):t()},s=function(e,n,t){/^[1-9]\d{4,11}$/.test(n.trim())?t():t(new Error("请输入正确QQ号"))},l=function(e,n,t){(null==n||n.length<6)&&t(new Error("请输入正确服务器地址")),/localhost/.test(n.trim())||r.a.isIP(n.trim())||r.a.isURL(n.trim())||t(new Error("请输入正确服务器地址")),t()},d=function(e){return 0===_.trim(e).length?"":e.replace(/\s+\n*/g," ").split(" ")},f=function(e,n,t){return e+(n-1)*t+1}},"5e27":function(e,n,t){},ba4e:function(e,n,t){"use strict";t.d(n,"c",function(){return i}),t.d(n,"b",function(){return u}),t.d(n,"a",function(){return a}),t.d(n,"e",function(){return s}),t.d(n,"f",function(){return l}),t.d(n,"d",function(){return d});var c=t("5c0f"),r=t("dd17"),o=t.n(r);o.a.Log.logger=console,o.a.Log.level=o.a.Log.INFO;var i=function(e){var n="://",t=e.redirect_uri.substr(e.redirect_uri.indexOf(n)+n.length);return t.substr(t.indexOf("/"))},u=function(e){var n=Object.assign({userStore:new o.a.WebStorageStateStore,accessTokenExpiringNotificationTime:10,automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0},e);return new r["UserManager"](n)},a=function(e,n,t){var r="add"+Object(c["a"])(n);"function"===typeof e.events[r]&&"function"===typeof t&&e.events[r](t)},s=function(e){if(e){var n=Object(c["c"])(e);return n.exp?1e3*n.exp:null}return null},l=function(e){var n=s(e);return!!n&&n<(new Date).getTime()},d=function(){(new r["UserManager"]).signinSilentCallback()}},bcc9:function(e,n,t){},db1a:function(e,n,t){e.exports=t.p+"img/logo-mb.32155705.png"}});