(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Juzi"],{"4c0a":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jz-box"},[s("el-row",[s("el-row",[s("el-col",{staticClass:"juzi-title",attrs:{span:6,offset:2}},[s("div",[t._v("句子对任务"+t._s(t.position)+"/"+t._s(t.allCount))])]),s("el-col",{staticStyle:{"text-aling":"right"},attrs:{span:14}},[s("div",{staticClass:"btn-box"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading_box"},[t._v("正在保存...")]),t.isFirst?t._e():s("button",{staticClass:"prev",attrs:{disabled:t.sub},on:{click:t.getPrev}},[t._v("上一个")]),s("button",{directives:[{name:"show",rawName:"v-show",value:7==t.taskGroupStatus,expression:"taskGroupStatus==7"}],staticClass:"next",attrs:{disabled:t.sub},on:{click:function(e){return t.getNext("正确")}}},[t._v("正确")]),s("button",{directives:[{name:"show",rawName:"v-show",value:7==t.taskGroupStatus,expression:"taskGroupStatus==7"}],staticClass:"next",attrs:{disabled:t.sub},on:{click:function(e){return t.getNext("错误")}}},[t._v("错误")]),s("button",{directives:[{name:"show",rawName:"v-show",value:7!==t.taskGroupStatus&&t.looklike<=60&&0!==t.childSentence.trim().length,expression:"taskGroupStatus!==7 && looklike <= 60 && childSentence.trim().length !== 0"}],staticClass:"next",attrs:{disabled:t.sub},on:{click:function(e){return t.getNext("正确")}}},[t._v("改好了")]),s("button",{directives:[{name:"show",rawName:"v-show",value:7!==t.taskGroupStatus&&t.looklike>60||0==t.childSentence.trim().length,expression:"taskGroupStatus!==7 && looklike > 60 || childSentence.trim().length == 0"}],staticClass:"next",attrs:{disabled:t.sub},on:{click:function(e){return t.getNext("错误")}}},[t._v("改好了")]),s("button",{directives:[{name:"show",rawName:"v-show",value:7!==t.taskGroupStatus,expression:"taskGroupStatus!==7"}],staticClass:"next",attrs:{disabled:t.sub},on:{click:function(e){return t.getNext("错误")}}},[t._v("改不了")])])])],1),s("el-col",{staticClass:"juzi-content",attrs:{span:20,offset:2}},[s("el-row",[s("el-col",{staticClass:"juzi-zhuanxie",attrs:{span:12}},[s("div",{staticClass:"zxjz-box"},[s("div",{staticClass:"home-title2"},[t._v("\n              原句\n              "),s("span",{staticClass:"fr"},[t._v(t._s(t.mainSentence.length)+"字")])]),s("div",{staticClass:"yuanju-text"},[t._v(t._s(t.mainSentence))])])]),s("el-col",{staticClass:"juzi-zhuanxie",attrs:{span:12}},[s("div",{staticClass:"gaixie-box"},[s("div",{staticClass:"home-title2"},[t._v("\n              改写\n              "),s("span",{staticClass:"fr"},[t._v(t._s(t.childSentence.trim().length)+"字")])]),s("div",{staticClass:"yuanju-text gaixie-text"},[s("el-input",{staticClass:"zhuanxie-input",attrs:{type:"textarea",rows:7,placeholder:"在此输入改写后的句子",readOnly:7===t.taskGroupStatus},on:{input:t.getLevenshtein},model:{value:t.childSentence,callback:function(e){t.childSentence=e},expression:"childSentence"}})],1),s("div",[s("span",{staticClass:"looklike fr"},[t._v("相似度："+t._s(t.looklike)+"%")]),t.looklike>60?s("span",{staticClass:"looklike_ts fl"},[t._v("相似度大于60%，不计费。")]):t._e(),0==t.childSentence.trim().length?s("span",{staticClass:"looklike_ts fl"},[t._v("字数为0，不计费。")]):t._e()])])])],1)],1)],1)],1)},i=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),o=(s("be4f"),s("450d"),s("896a")),c=s.n(o),l=(s("9d4c"),s("e450")),u=s.n(l),r=(s("10cb"),s("f3ad")),d=s.n(r),h=(s("7a0f"),s("0f6c")),p=s.n(h),v=(s("f4f9"),s("c2cc")),f=s.n(v),m=s("2b0e"),g=s("b775"),b=s("2f62"),k=s("8423");s("c67a");function S(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?S(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):S(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}m["default"].use(f.a),m["default"].use(p.a),m["default"].use(d.a),m["default"].use(u.a),m["default"].use(c.a);var x={name:"Juzi",props:["rid"],data:function(){return{position:0,allCount:0,id:0,mainSentence:"",childSentence:"",isFirst:!0,isLast:!1,show:!0,looklike:0,over:!1,doList:[],taskGroupStatus:0,fullscreenLoading:!1,sub:!1,loading:!1}},mixins:[k["a"]],computed:w({},Object(b["c"])(["acceptedTasks"])),beforeRouteLeave:function(t,e,s){console.log("leave",t,e),this.over?s():(this.$confirm("没做完就退出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnHashChange:!1,type:"warning"}).then(function(){s()}).catch(function(){s(!1)}),s(!1))},mounted:function(){this.getInit(),window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)})},methods:w({getLevenshtein:function(t){var e=this,s=_.trim(t);""!=this.mainSentence&&""!=s?Object(g["a"])({url:"Helper/ComputedEditDistanceSimilarity",method:"post",data:{source:this.mainSentence,target:s}}).then(function(t){e.looklike=(100*t.data).toFixed(0)}).catch(function(t){e.looklike=0}):this.looklike=0},getInit:function(){var t=this;this.saveAndGet({target:0,taskId:this.rid,data:{id:this.id,childSentence:this.childSentence}}).then(function(e){t.id=e.id,t.mainSentence=e.mainSentence,t.childSentence=e.childSentence||"",t.isFirst=e.isFirst,t.isLast=e.isLast,t.position=e.position,t.allCount=e.allCount,t.looklike=0,t.taskGroupStatus=e.taskGroupStatus,t.doList=_.map(_.range(e.allCount),function(t){return!1}),t.getLevenshtein(e.childSentence||"")},function(e){console.log(t),t.$router.push("/home"),t.$message("获取数据出错，请刷新页面")})},submit:function(){var t=this;this.submitTask({taskId:this.rid}).then(function(){t.$message.success("恭喜完成任务"),t.over=!0,t.$router.push("/home")})},getNext:function(t){var e=this;this.sub=!0,this.loading=!0,this.saveAndGet({target:0,taskId:this.rid,data:{id:this.id,childSentence:this.childSentence,tag:t}}).then(function(s){e.sub=!1,e.loading=!1,_.isNull(s)||(e.id=s.id,e.mainSentence=s.mainSentence,e.childSentence=s.childSentence||"",e.isFirst=s.isFirst,e.isLast=s.isLast,e.position=s.position,e.allCount=s.allCount,e.taskGroupStatus=s.taskGroupStatus,e.getLevenshtein(s.childSentence||""),e.doList[s.allCount-2]&&!e.doList[s.allCount-1]?e.doList[s.allCount-1]=!0:e.doList[s.position-2]=!0,s.isLast&&e.doList[s.position-1]&&(e.sub=!0,e.loading=!0,e.submitTask({taskId:e.rid,tag:t}).then(function(){e.sub=!1,e.loading=!1,e.$message.success("恭喜完成任务"),e.over=!0,e.$router.push("/home")})))},function(t){e.sub=!1,e.loading=!1,e.$message("保存出错，请重试")})},getPrev:function(){var t=this;this.sub=!0,this.loading=!0,this.saveAndGet({target:-1,taskId:this.rid,data:{id:this.id}}).then(function(e){t.sub=!1,t.loading=!1,t.id=e.id,t.mainSentence=e.mainSentence,t.childSentence=e.childSentence||"",t.isFirst=e.isFirst,t.isLast=e.isLast,t.position=e.position,t.allCount=e.allCount,t.taskGroupStatus=e.taskGroupStatus,t.getLevenshtein(e.childSentence||""),t.doList[e.position-1]=!1}).catch(function(){t.sub=!1,t.loading=!1,t.$message("出错，请重试")})}},Object(b["b"])(["saveAndGet","submitTask"]))},C=x,L=(s("d206"),s("8217"),s("2877")),j=Object(L["a"])(C,n,i,!1,null,"3bf6053c",null);e["default"]=j.exports},"639e":function(t,e,s){},8217:function(t,e,s){"use strict";var n=s("f01d"),i=s.n(n);i.a},d206:function(t,e,s){"use strict";var n=s("639e"),i=s.n(n);i.a},f01d:function(t,e,s){}}]);
//# sourceMappingURL=Juzi.2fe6b2bf.js.map